(function(){var t;t={els:".js-crispy",images:[],breakpoints:["32em","48em","62em","76em"],init:function(){return this.currentBreakpoint=this.getCurrentBreakpoint(),this.gather(),this.bind()},bind:function(){var t=this;return $(window).smartresize(function(){return t.refreshImages()})},windowWidth:function(){return $(window).width()/Number($("body").css("font-size"))},getCurrentBreakpoint:function(){var t,r,n,e,i,a;for(t=this.breakpoints[0],a=this.breakpoints,n=function(r){return window.matchMedia&&window.matchMedia("all and (min-width: "+r+")").matches?t=r:void 0},e=0,i=a.length;i>e;e++)r=a[e],n(r);return t},testBreakpointChange:function(){var t;return t=this.getCurrentBreakpoint(),this.currentBreakpoint===t?!1:(this.currentBreakpoint=t,!0)},refreshImages:function(){return this.testBreakpointChange()?this.gather():void 0},gather:function(){var t,r,n,e;for(r=$(this.els),this.images=[],n=0,e=r.length;e>n;n++)t=r[n],this.add(t);return this.grabFromServer()},add:function(t){return t=$(t),this.images.push({src:t.attr("data-src"),width:t.width()})},buildQuery:function(){var t,r,n,e,i,a;for(t=function(t,r){return r+="image[]="+t.src+"&width[]="+t.width+"&"},r="",a=this.images,e=0,i=a.length;i>e;e++)n=a[e],r=t(n,r);return r=r.slice(0,-1)},grabFromServer:function(){var t,r=this;return t=this.buildQuery(),$.ajax({type:"GET",url:"resize.php",data:t,success:function(t){var n,e,i;for(e=0,i=t.length;i>e;e++)n=t[e],r.loadImage(n);return!0}})},loadImage:function(t){var r,n;return r=$("[data-src='"+t.og_src+"']"),n=$("<img />"),n.attr("src",t.src).attr("alt",r.attr("data-alt")),r.children("img").length?r.children("img").attr("src",t.src):n.load(function(){return r.append(n),r.addClass("img-loaded")})}},$(document).ready(function(){t.init()})}).call(this);